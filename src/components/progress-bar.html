<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Progress Bar Component</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="../styles/global.css" />
  <link rel="stylesheet" href="../styles/components.css" />
</head>

<body>
  <!-- wrapper for this component -->
  <section class="progress-bar" aria-labelledby="cat-personal">
    <!-- Top Row: icon + title (left) and totals (right ) -->
    <div class="top-row">
      <div class="progress-label">
        <div class="category-icons" aria-hidden="true">
          <i data-lucide="user" class="icon--user" aria-hidden="true"></i>
        </div>
        <!-- fixed: id and class are in the opening tag -->
        <h3 id="cat-personal" class="category-title">Personal</h3>
      </div>

      <div class="budget-total" aria-hidden="true">
        <span class="budget-amount">$85</span>
        <span class="budget-of">of</span>
        <span class="budget-max">$150</span>
      </div>
    </div>

    <!-- Progress Row: container + actual track (role="progressbar") -->
    <div class="progress-row">
      <div
        class="progress-track"
        role="progressbar"
        aria-label="Personal budget progress"
        aria-valuenow="85"
        aria-valuemin="0"
        aria-valuemax="150"
        data-value="85"
        data-max="150"
      >
        <!-- Inline width can be used for quick visual testing, but remove for production and let JS calculate -->
        <div class="progress-fill" style="width:56%"></div>
      </div>
    </div>

    <!-- Bottom Row: percent + alert icons left, left-amount right -->
    <div class="budget-detail">
      <div class="left-detail">
        <div class="percentage">
          <span class="percent-number">56</span><span class="percent-sign">%</span>
        </div>

        <!-- Alert Circle Icons (your existing component markup fits here) -->
        <div class="alert-group">
          <div class="alert-circle alert-circle--success">
            <i data-lucide="circle-check" aria-hidden="true"></i>
          </div>
          <div class="alert-circle alert-circle--warning alert-circle--active">
            <i data-lucide="circle-alert" aria-hidden="true"></i>
          </div>
          <div class="alert-circle alert-circle--alert">
            <i data-lucide="circle-x" aria-hidden="true"></i>
          </div>
        </div>
      </div>

      <div class="right-detail" aria-hidden="true">
        <span class="left-amount">$65</span>
        <span class="left-text">left</span>
      </div>
    </div>
  </section>

  <!-- Lucide + small script to compute percent & width from data-attributes -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=> {
      // initialize lucide icons (turn <i data-lucide="..."> into SVG)
      if (window.lucide) lucide.replace();

      // compute percent for every progress-track on the page
      document.querySelectorAll('.progress-track').forEach((track) => {
        const value = Number(track.dataset.value) || 0;
        const max = Number(track.dataset.max) || 100;
        const pct = Math.max(0, Math.min(100, (value / max) * 100));
        const fill = track.querySelector('.progress-fill');
        if (fill) fill.style.width = pct + '%';   // visual fill
        track.setAttribute('aria-valuenow', String(value)); // accessibility update

        // update visible percent inside the same progress-bar wrapper
        const wrapper = track.closest('.progress-bar');
        const pctEl = wrapper?.querySelector('.percent-number');
        if (pctEl) pctEl.textContent = String(Math.round(pct));
      });
    });
  </script>
</body>
</html>